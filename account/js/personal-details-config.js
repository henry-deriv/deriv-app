!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a(require("@deriv/shared"),require("@deriv/translations")):"function"==typeof define&&define.amd?define(["@deriv/shared","@deriv/translations"],a):"object"==typeof exports?exports["@deriv/account"]=a(require("@deriv/shared"),require("@deriv/translations")):e["@deriv/account"]=a(e["@deriv/shared"],e["@deriv/translations"])}(self,((e,a)=>(()=>{"use strict";var t={"@deriv/shared":a=>{a.exports=e},"@deriv/translations":e=>{e.exports=a}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,i),l.exports}i.d=(e,a)=>{for(var t in a)i.o(a,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},i.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);var l={};return(()=>{i.d(l,{default:()=>s});var e=i("@deriv/shared"),a=i("@deriv/translations"),t=function(a){return(0,e.getUrlBase)("/public/images/common/".concat(a))};function n(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,l,r,o=[],s=!0,u=!1;try{if(l=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=l.call(t)).done)&&(o.push(n.value),o.length!==a);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(u)throw i}}return o}}(e,a)||function(e,a){if(e){if("string"==typeof e)return r(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,a):void 0}}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}Object.freeze({ke:{alien_card:{new_display_name:"",example_format:"123456",sample_image:t("ke_alien_card.png")},national_id:{new_display_name:"",example_format:"12345678",sample_image:t("ke_national_identity_card.png")},passport:{new_display_name:"",example_format:"A12345678",sample_image:t("ke_passport.png")}},za:{national_id:{new_display_name:(0,a.localize)("National ID"),example_format:"1234567890123",sample_image:t("za_national_identity_card.png")},national_id_no_photo:{new_display_name:(0,a.localize)("National ID (No Photo)"),example_format:"1234567890123",sample_image:""}},ng:{bvn:{new_display_name:(0,a.localize)("Bank Verification Number"),example_format:"12345678901",sample_image:""},cac:{new_display_name:(0,a.localize)("Corporate Affairs Commission"),example_format:"12345678",sample_image:""},drivers_license:{new_display_name:"",example_format:"ABC123456789",sample_image:t("ng_drivers_license.png")},nin:{new_display_name:(0,a.localize)("National Identity Number"),example_format:"12345678901",sample_image:""},nin_slip:{new_display_name:(0,a.localize)("National Identity Number Slip"),example_format:"12345678901",sample_image:t("ng_nin_slip.png")},tin:{new_display_name:(0,a.localize)("Taxpayer identification number"),example_format:"12345678-1234",sample_image:""},voter_id:{new_display_name:(0,a.localize)("Voter ID"),example_format:"1234567890123456789",sample_image:t("ng_voter_id.png")}},gh:{drivers_license:{new_display_name:"",example_format:"B1234567",sample_image:""},national_id:{new_display_name:(0,a.localize)("National ID"),example_format:"GHA-123456789-1",sample_image:""},passport:{new_display_name:(0,a.localize)("Passport"),example_format:"G1234567",sample_image:""},ssnit:{new_display_name:(0,a.localize)("Social Security and National Insurance Trust"),example_format:"C123456789012",sample_image:""},voter_id:{new_display_name:(0,a.localize)("Voter ID"),example_format:"01234567890",sample_image:""}},br:{cpf:{new_display_name:(0,a.localize)("CPF"),example_format:"123.456.789-12",sample_image:""}},ug:{national_id:{new_display_name:(0,a.localize)("National ID"),example_format:"CM12345678PE1D",sample_image:t("ug_national_identity_card.png")},national_id_no_photo:{new_display_name:(0,a.localize)("National ID (No Photo)"),example_format:"CM12345678PE1D",sample_image:""}},zw:{national_id:{new_display_name:(0,a.localize)("National ID"),example_format:"081234567F53",sample_image:t("zw_national_identity_card.png")}}});var o=function(e,a){var t=a.real_account_signup_target,n=a.residence_list,i=a.account_settings,l=a.account_status,r=a.residence;return["malta","iom"].includes(t)&&e.tax_residence&&e.tax_residence.rules.shift(),function(e){var a,t,n,i,l=e.account_status,r=e.residence,o=e.residence_list,s=e.real_account_signup_target,u=e.account_settings.citizen||r,_=o.find((function(e){return e.value===u})),c="maltainvest"===s,d=null==l||null===(a=l.status)||void 0===a?void 0:a.some((function(e){return"skip_idv"===e}));return Boolean(!c&&u&&(null==_||null===(t=_.identity)||void 0===t||null===(n=t.services)||void 0===n||null===(i=n.idv)||void 0===i?void 0:i.is_country_supported)&&!d)}({account_status:l,account_settings:i,residence:r,residence_list:n,real_account_signup_target:t})||(delete e.document_type,delete e.document_number),e};const s=function(t,i){var l=t.upgrade_info,r=t.real_account_signup_target,s=t.residence_list,u=t.account_settings,_=t.account_status,c=t.residence,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],m=function(t){var n,i,l,r,o,s,u,_,c,d,m,p,f=t.residence_list,v=t.account_settings,g=t.is_appstore,y=t.real_account_signup_target;if(!f||!v)return{};var x={account_opening_reason:{supported_in:["iom","malta","maltainvest"],default_value:null!==(n=v.account_opening_reason)&&void 0!==n?n:"",rules:[["req",(0,a.localize)("Account opening reason is required.")]]},salutation:{supported_in:["iom","malta","maltainvest"],default_value:null!==(i=v.salutation)&&void 0!==i?i:"",rules:[["req",(0,a.localize)("Salutation is required.")]]},first_name:{supported_in:["svg","iom","malta","maltainvest"],default_value:null!==(l=v.first_name)&&void 0!==l?l:"",rules:[["req",(0,a.localize)("First name is required.")],["length",(0,a.localize)("First name should be between 2 and 50 characters."),{min:2,max:50}],["name",(0,e.getErrorMessages)().name()]]},last_name:{supported_in:["svg","iom","malta","maltainvest"],default_value:null!==(r=v.last_name)&&void 0!==r?r:"",rules:[["req",(0,a.localize)("Last name is required.")],["length",(0,a.localize)("Last name should be between 2 and 50 characters."),{min:2,max:50}],["name",(0,e.getErrorMessages)().name()]]},date_of_birth:{supported_in:["svg","iom","malta","maltainvest"],default_value:v.date_of_birth?(0,e.toMoment)(v.date_of_birth).format("YYYY-MM-DD"):"",rules:[["req",(0,a.localize)("Date of birth is required.")],[function(a){return(0,e.toMoment)(a).isValid()&&(0,e.toMoment)(a).isBefore((0,e.toMoment)().subtract(18,"years"))},(0,a.localize)("You must be 18 years old and above.")]]},place_of_birth:{supported_in:["maltainvest","iom","malta"],default_value:v.place_of_birth?null===(o=f.find((function(e){return e.value===v.place_of_birth})))||void 0===o?void 0:o.text:"",rules:[["req",(0,a.localize)("Place of birth is required.")]]},citizen:{supported_in:["iom","malta","maltainvest"],default_value:v.citizen?null===(s=f.find((function(e){return e.value===v.citizen})))||void 0===s?void 0:s.text:"",rules:[["req",(0,a.localize)("Citizenship is required")]]},phone:{supported_in:["svg","iom","malta","maltainvest"],default_value:null!==(u=v.phone)&&void 0!==u?u:"",rules:[["req",(0,a.localize)("Phone is required.")],["phone",(0,a.localize)("Phone is not in a proper format.")],[function(a){var t=a.replace(/\D/g,"");return(0,e.validLength)(t,{min:9,max:35})},(0,a.localize)("You should enter {{min}}-{{max}} numbers.",{min:9,max:35})]]},tax_residence:{default_value:"maltainvest"===y?v.residence:(null===(_=f.find((function(e){return e.value===v.tax_residence})))||void 0===_?void 0:_.text)||"",supported_in:["maltainvest"],rules:[["req",(0,a.localize)("Tax residence is required.")]]},tax_identification_number:{default_value:null!==(c=v.tax_identification_number)&&void 0!==c?c:"",supported_in:["maltainvest"],rules:[["req",(0,a.localize)("Tax Identification Number is required.")],["length",(0,a.localize)("Tax Identification Number can't be longer than 25 characters."),{min:0,max:25}],["regular",(0,a.localize)("Letters, numbers, spaces, periods, hyphens and forward slashes only."),{regex:/^(?!^$|\s+)[A-Za-z0-9./\s-]{0,25}$/}],[function(e,a,t){return!!t.tax_residence},(0,a.localize)("Please fill in Tax residence.")],[function(e,a,t){var n,i,l=t.tax_residence,r=null===(n=f.filter((function(e){return e.text===l&&e.tin_format}))[0])||void 0===n||null===(i=n.tin_format)||void 0===i?void 0:i[0];return!r||new RegExp(r).test(e)},["warn",(0,a.localize)("This Tax Identification Number (TIN) is invalid. You may continue with account creation, but to facilitate future payment processes, valid tax information will be required.")]]]},employment_status:{default_value:null!==(d=v.employment_status)&&void 0!==d?d:"",supported_in:["maltainvest"],rules:[["req",(0,a.localize)("Employment status is required.")]]},tax_identification_confirm:{default_value:!1,supported_in:["maltainvest"],rules:[["confirm",(0,a.localize)("Please confirm your tax information.")]]},document_type:{default_value:null!==(m=v.document_type)&&void 0!==m?m:{id:"",text:"",value:"",example_format:"",sample_image:""},supported_in:["svg"],rules:[]},document_number:{default_value:null!==(p=v.document_number)&&void 0!==p?p:"",supported_in:["svg"],rules:[]}};return[function(){if(g){var e=["first_name","last_name","date_of_birth","phone"];return Object.keys(x).reduce((function(a,t){return e.includes(t)&&(a[t]=x[t]),a}),{})}return x}()]}({residence_list:s,account_settings:u,is_appstore:d,real_account_signup_target:r}),p=n(m,1)[0],f=u.immutable_fields;return{header:{active_title:d?(0,a.localize)("A few personal details"):(0,a.localize)("Complete your personal details"),title:d?(0,a.localize)("PERSONAL"):(0,a.localize)("Personal details")},body:i,form_value:(0,e.getDefaultFields)(r,p),props:{validate:(0,e.generateValidationFunction)(r,o(p,{real_account_signup_target:r,residence_list:s,account_settings:u,account_status:_,residence:c})),is_svg:"svg"===(null==l?void 0:l.can_upgrade_to),is_mf:"maltainvest"===r,account_opening_reason_list:[{text:(0,a.localize)("Hedging"),value:"Hedging"},{text:(0,a.localize)("Income Earning"),value:"Income Earning"},{text:(0,a.localize)("Speculative"),value:"Speculative"}],salutation_list:[{label:(0,a.localize)("Mr"),value:"Mr"},{label:(0,a.localize)("Ms"),value:"Ms"}],disabled_items:f,account_status:_,residence:c,account_settings:u,real_account_signup_target:r},passthrough:["residence_list","is_fully_authenticated","has_real_account"],icon:"IcDashboardPersonalDetails"}}})(),l.default})()));