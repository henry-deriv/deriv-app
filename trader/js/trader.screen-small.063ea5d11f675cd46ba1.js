"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["screen-small"],{"./src/Modules/Trading/Components/Form/screen-small.jsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>Be});var r=a("../../node_modules/prop-types/index.js"),n=a.n(r),o=a("react"),i=a.n(o),l=a("@deriv/components"),u=a("./src/App/Components/Elements/ContentLoader/index.js"),c=a("../../node_modules/classnames/index.js"),s=a.n(c),m=a("./src/Stores/useTraderStores.tsx"),d=a("../stores/src/index.ts"),_=a("@deriv/translations"),p=function(e){var t=e.onChange,a=e.is_allow_equal,r=e.has_equals_only,n=e.className;return i().createElement("div",{className:s()("allow-equals","mobile-widget",n)},i().createElement(l.Checkbox,{label:(0,_.localize)("Equals"),value:a,name:"is_equal",onChange:function(e){e.persist();var a=e.target,r=a.name,n=a.checked;t({target:{name:r,value:Number(n)}})},disabled:r}),i().createElement(l.Text,{as:"p",size:"xxxs"},i().createElement(_.Localize,{i18n_default_text:"Win payout if exit spot is also equal to entry spot."})))};p.propTypes={className:n().string,is_allow_equal:n().bool,has_equals_only:n().bool,onChange:n().func};const f=(0,d.Pi)((function(){var e=(0,m.b)(),t={is_allow_equal:!!e.is_equal,has_equals_only:e.has_equals_only,onChange:e.onChange};return i().createElement(p,t)}));var b=a("./src/Stores/Modules/Trading/Helpers/allow-equals.js"),v=a("@deriv/shared"),g=a("../../node_modules/lodash.debounce/index.js"),y=a.n(g),h=a("./src/Stores/Modules/Trading/Helpers/proposal.js");function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){k(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===E(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S=y()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=w(w({},e),t),n=(0,h.RX)(r),o={},i=function(e){e.error||(o[e.subscription.id]=!0,a(e))};if(!(0,v.isEmptyObject)(n)){var l=n;Object.keys(l).forEach((function(e){v.WS.subscribeProposal(l[e],i)}))}return function(){Object.keys(o).forEach((function(e){v.WS.forget(e),delete o[e]}))}}),700),j=(0,d.Pi)((function(e){var t=e.basis,a=e.duration_unit,r=e.duration_value,n=e.toggleModal,o=e.has_duration_error,u=e.selected_basis,c=e.setSelectedAmount,p=e.setAmountError,f=(0,d.oR)(),b=f.ui,g=f.client,y=b.addToast,h=b.vanilla_trade_type,E=g.currency,x=(0,m.b)(),w=x.onChangeMultiple,k=x.trade_amount,S=x.trade_basis,j=x.trade_duration_unit,M=x.trade_duration,O=x.contract_type,C=x.stake_boundary,A=(0,v.getDecimalPlaces)(E),N=Number("0").toFixed((0,v.getDecimalPlaces)(E)),P=parseFloat(N.toString().replace(/.$/,"1")),T=function(e){var t=i().createElement(_.Localize,{i18n_default_text:"Should not be 0 or empty"}),a=parseFloat(e.toString());return"0."===e.toString()||0===a?(y({key:"amount_error",content:t,type:"error",timeout:2e3}),p(!0),"error"):isNaN(a)||a<P||e.toString().length<1?(y({key:"amount_error",content:t,type:"error",timeout:2e3}),p(!0),!1):(p(!1),!0)};return i().createElement("div",{className:"trade-params__strike"},"vanilla"===O&&i().createElement("section",{className:"trade-container__stake-field"},i().createElement("div",{className:"trade-container__stake-field--min"},i().createElement(l.Text,{size:"xxs"},(0,_.localize)("Min. stake")),i().createElement(l.Text,{size:"xxs"},C[h].min_stake," ",E)),i().createElement("div",{className:"trade-container__stake-field--max"},i().createElement(l.Text,{size:"xxs"},(0,_.localize)("Max. stake")),i().createElement(l.Text,{size:"xxs"},C[h].max_stake," ",E))),i().createElement("div",{className:s()("trade-params__amount-keypad",{strike__pos:"vanilla"===O})},i().createElement(l.Numpad,{value:u,format:function(e){return isNaN(e)||""===e?e:Number(e).toFixed(A)},onSubmit:function(e){var i={};a===j||o||(i.duration_unit=a),r===M||o||(i.duration=r),e===k&&t===S||(i.basis=t,i.amount=e),(0,v.isEmptyObject)(i)||w(i),n()},currency:E,min:P,is_currency:!0,render:function(e){var t=e.value,a=e.className;return i().createElement("div",{className:a},parseFloat(t)>0?i().createElement(l.Money,{currency:E,amount:t,should_format:!1}):t)},reset_press_interval:450,reset_value:"",pip_size:A,onValidate:T,submit_label:(0,_.localize)("OK"),onValueChange:function(e){c(t,e),T(e)}})))}));const M=(0,d.Pi)((function(e){var t=e.toggleModal,a=e.duration_value,r=e.duration_unit,n=e.has_duration_error,o=e.amount_tab_idx,u=e.setAmountError,c=e.setAmountTabIdx,s=e.setSelectedAmount,d=e.stake_value,_=e.payout_value,p=(0,m.b)(),f=p.basis,b=p.basis_list,v=void 0!==o?o:b.findIndex((function(e){return e.value===f}));return 1===b.length?i().createElement(j,{toggleModal:t,duration_value:a,duration_unit:r,has_duration_error:n,basis:b[0].value,setAmountError:u,selected_basis:"stake"===b[0].value?d:_,setSelectedAmount:s}):i().createElement("div",null,i().createElement(l.Tabs,{active_index:v,onTabItemClick:c,top:!0},b.map((function(e){switch(e.value){case"stake":return i().createElement("div",{label:e.text,key:e.value},i().createElement(j,{toggleModal:t,duration_value:a,duration_unit:r,has_duration_error:n,basis:e.value,setAmountError:u,selected_basis:d,setSelectedAmount:s}));case"payout":return i().createElement("div",{label:e.text,key:e.value},i().createElement(j,{toggleModal:t,duration_value:a,duration_unit:r,has_duration_error:n,basis:e.value,setAmountError:u,selected_basis:_,setSelectedAmount:s}));default:return null}}))))}));var O=a("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/info.jsx");function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const N=(0,d.Pi)((function(e){var t=e.is_open,a=e.toggleModal;(0,l.usePreventIOSZoom)();var r=(0,d.oR)().ui,n=r.enableApp,o=r.disableApp;return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:n,is_open:t,is_title_centered:!0,should_header_stick_body:!1,disableApp:o,toggleModal:a,height:"auto",width:"calc(100vw - 32px)",title:(0,_.localize)("Stake")},i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},i().createElement(P,{toggleModal:a}))))}));var P=(0,d.Pi)((function(e){var t=e.toggleModal,a=(0,m.b)(),r=a.amount,n=a.currency,o=a.trade_stop_out,u=a.trade_store,c=C(i().useState(r),2),s=c[0],d=c[1],p=C(i().useState(null),2),f=p[0],b=p[1],g=C(i().useState(null),2),y=g[0],h=g[1],E=i().useRef(r),x=(0,v.useIsMounted)();return i().useEffect((function(){if(s!==r){var e=S(u,{amount:s},(function(e){var t,a,r=e.proposal,n=e.echo_req,o=e.subscription;x()&&r&&"MULTUP"===n.contract_type&&Number(n.amount)===Number(E.current)?(b(r.commission),h(null===(t=r.limit_order)||void 0===t||null===(a=t.stop_out)||void 0===a?void 0:a.order_amount)):null!=o&&o.id&&v.WS.forget(o.id)}));return function(){null==e||e()}}}),[s]),i().createElement(i().Fragment,null,i().createElement("div",{className:"trade-params__multiplier-ic-info-wrapper"},i().createElement(l.Popover,{alignment:"right",icon:"info",id:"dt_multiplier-stake__tooltip",zIndex:9999,is_bubble_hover_enabled:!0,message:i().createElement(_.Localize,{i18n_default_text:"To ensure your loss does not exceed your stake, your contract will be closed automatically when your loss equals to <0/>.",components:[i().createElement(l.Money,{key:0,amount:y||o,currency:n,show_currency:!0})]})})),i().createElement(M,{toggleModal:t,amount_tab_idx:0,setSelectedAmount:function(e,t){d(t),E.current=t},setAmountError:function(){},stake_value:s}),i().createElement(O.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:f,stop_out:y,amount:s}))}));const T=function(e){var t,a=e.items_list,r=e.contract_name,n=e.current_value_object,o=e.onChange,u=e.info,c=e.is_tooltip_disabled,s=void 0!==c&&c,m=e.popover_alignment,d=void 0===m?"right":m,_=e.toggleModal;return i().createElement(i().Fragment,null,i().createElement("div",{className:"trade-params__".concat(r,"-ic-info-wrapper")},i().createElement(l.Popover,{alignment:d,disable_target_icon:s,icon:"info",id:"dt_".concat(r,"-stake__tooltip"),is_bubble_hover_enabled:!0,zIndex:9999,message:u})),i().createElement(l.RadioGroup,{className:"trade-params__".concat(r,"-radio-group"),name:"trade-params__".concat(r,"-radio"),selected:Number.isNaN(n.value)?"":null===(t=n.value)||void 0===t?void 0:t.toString(),onToggle:function(e){o({target:{name:n.name,value:Number(e.target.value)}}),_()}},a.map((function(e){var t=e.text,a=e.value;return i().createElement(l.RadioGroup.Item,{key:a,id:t,label:t,value:null==a?void 0:a.toString()})}))))};function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var I=(0,d.Pi)((function(){var e=(0,m.b)(),t=e.amount,a=e.multiplier,r=e.multiplier_range_list,n=e.onChange,o=e.toggleModal,l=e.trade_store,u=z(i().useState(null),2),c=u[0],s=u[1],d=z(i().useState(null),2),p=d[0],f=d[1],b=(0,v.useIsMounted)();return i().useEffect((function(){if(t){var e=S(l,{amount:t},(function(e){var a,r,n=e.echo_req,o=e.proposal,i=e.subscription;b()&&o&&"MULTUP"===n.contract_type&&Number(n.amount)===t?(s(o.commission),f(null===(a=o.limit_order)||void 0===a||null===(r=a.stop_out)||void 0===r?void 0:r.order_amount)):null!=i&&i.id&&v.WS.forget(i.id)}));return function(){null==e||e()}}}),[t]),i().createElement(i().Fragment,null,i().createElement(T,{contract_name:"multiplier",current_value_object:{name:"multiplier",value:a},info:(0,_.localize)("Your gross profit is the percentage change in market price times your stake and the multiplier chosen here."),items_list:r,onChange:n,toggleModal:o}),i().createElement(O.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:c,stop_out:p,amount:t}))}));const F=I,q=(0,d.Pi)((function(e){var t,a,r=e.is_open,n=e.modal_title,o=e.toggleModal,u=(0,m.b)(),c=u.accumulator_range_list,s=u.growth_rate,p=u.onChange,f=u.tick_size_barrier,b=u.proposal_info,g=(0,d.oR)().ui,y=g.enableApp,h=g.disableApp;(0,l.usePreventIOSZoom)();var E=(null==b||null===(t=b.ACCU)||void 0===t?void 0:t.has_error)||!(null!=b&&null!==(a=b.ACCU)&&void 0!==a&&a.id)||(0,v.isEmptyObject)(b);return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:y,is_open:r,is_title_centered:!0,should_header_stick_body:!1,disableApp:h,toggleModal:o,height:"auto",width:"calc(100vw - 32px)",title:n},i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},n===(0,_.localize)("Multiplier")?i().createElement(F,{toggleModal:o}):i().createElement(T,{contract_name:"accumulator",current_value_object:{name:"growth_rate",value:s},info:(0,_.localize)("Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier}} from the previous spot price.",{growth_rate:(0,v.getGrowthRatePercentage)(s),tick_size_barrier:(0,v.getTickSizeBarrierPercentage)(f)}),is_tooltip_disabled:E,items_list:c.map((function(e){return{text:"".concat((0,v.getGrowthRatePercentage)(e),"%"),value:e}})),onChange:p,popover_alignment:"bottom",toggleModal:o}))))}));var R=a("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.jsx"),Z=(0,d.Pi)((function(e){var t=e.is_open,a=e.toggleModal,r=(0,d.oR)().ui,n=r.enableApp,o=r.disableApp;return i().createElement(i().Fragment,null,i().createElement(l.Modal,{enableApp:n,is_open:t,disableApp:o,toggleModal:a,has_close_icon:!1,should_header_stick_body:!1,height:"auto",width:"calc(100vw - 3.2rem)",title:(0,_.localize)("Expiration")},i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},i().createElement("div",{style:{minHeight:"120px",padding:"1.6rem"}},i().createElement(l.Text,{size:"xs",color:"general"},i().createElement(_.Localize,{i18n_default_text:"Your contract will be closed automatically at the next available asset price on <0></0>.",components:[i().createElement(R.Z,{key:0,is_text_only:!0,text_size:"xs"})]}))),i().createElement(l.Modal.Footer,{has_separator:!0},i().createElement(l.Button,{style:{width:"100%",height:"4rem"},large:!0,primary:!0,has_effect:!0,text:(0,_.localize)("OK"),onClick:a})))))}));Z.propTypes={is_open:n().bool,toggleModal:n().func};const L=Z;function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var V=function(e){var t=e.amount,a=e.currency,r=e.expiration,n=e.is_crypto_multiplier,o=U(i().useState(!1),2),u=o[0],c=o[1],s=U(i().useState(!1),2),m=s[0],d=s[1],p=function(){c(!u)},f=function(){d(!m)};return i().createElement(i().Fragment,null,i().createElement(N,{is_open:u,toggleModal:p}),i().createElement("div",{className:"mobile-widget mobile-widget__multiplier",onClick:p},i().createElement("div",{className:"mobile-widget__multiplier-amount"},i().createElement("div",{className:"mobile-widget__item"},i().createElement(l.Text,{weight:"bold",size:"xxs"},i().createElement(l.Money,{amount:t,currency:a,show_currency:!0})))),i().createElement(O.Z,{className:"mobile-widget__multiplier-trade-info",commission_text_size:"xxxxs",stop_out_text_size:"xxxxs"})),n&&i().createElement("div",{className:"mobile-widget",onClick:r?f:null},i().createElement("div",{className:"mobile-widget__multiplier-expiration"},i().createElement(l.Text,{size:"xxs"},(0,_.localize)("Expires on")),i().createElement(R.Z,{is_text_only:!0,text_size:"xxs"})),i().createElement(L,{is_open:m,toggleModal:f})))},W=(0,d.Pi)((function(){var e=(0,m.b)(),t={amount:e.amount,expiration:e.expiration,currency:e.currency,is_crypto_multiplier:e.is_crypto_multiplier,multiplier:e.multiplier};return i().createElement(V,t)})),$=function(e){var t=e.displayed_trade_param,a=e.modal_title,r=U(i().useState(!1),2),n=r[0],o=r[1],l=function(){o(!n)};return i().createElement(i().Fragment,null,i().createElement(q,{is_open:n,toggleModal:l,modal_title:a}),i().createElement("div",{className:"mobile-widget mobile-widget__multiplier-options",onClick:l},i().createElement("div",{className:"mobile-widget__item"},i().createElement("span",{className:"mobile-widget__item-value"},t))))},B=(0,d.Pi)((function(){var e=(0,m.b)().multiplier,t="x".concat(e),a=(0,_.localize)("Multiplier");return i().createElement($,{displayed_trade_param:t,modal_title:a})})),H=(0,d.Pi)((function(){var e=(0,m.b)().growth_rate,t="".concat((0,v.getGrowthRatePercentage)(e),"%"),a=(0,_.localize)("Growth rate");return i().createElement($,{displayed_trade_param:t,modal_title:a})})),Y=a("./src/Modules/Trading/Components/Form/LabeledQuantityInputMobile/index.js"),K=(0,d.Pi)((function(e){var t=e.is_nativepicker,a=(0,d.oR)(),r=a.ui,n=a.client,o=r.current_focus,u=r.setCurrentFocus,c=n.is_single_currency,p=(0,m.b)(),f=p.amount,b=p.currency,g=p.onChange;return i().createElement(i().Fragment,null,i().createElement(l.MobileWrapper,null,i().createElement(Y.Z,{input_label:(0,_.localize)("Stake"),className:s()("trade-container__amount","trade-container__amount--accumulator"),classNameInlinePrefix:"trade-container__currency",classNameInput:s()("trade-container__input","trade-container__input--accumulator"),currency:b,current_focus:o,fractional_digits:(0,v.getDecimalPlaces)(b),id:"dt_amount_input",inline_prefix:c?b:null,is_autocomplete_disabled:!0,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_nativepicker:t,is_negative_disabled:!0,max_length:v.AMOUNT_MAX_LENGTH,name:"amount",onChange:g,type:"tel",value:f,ariaLabel:(0,_.localize)("Amount"),setCurrentFocus:u})))}));K.propTypes={is_nativepicker:n().bool};const Q=K;var X=a("./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display.jsx"),J=a("./src/Modules/Trading/Components/Form/TradeParams/barrier.jsx");function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var ae=(0,_.localize)("OK"),re=function(e,t,a,r,n,o){"stake"===r&&t!==o?(e.basis="stake",e.amount=t):"payout"===r&&a!==o?(e.basis="payout",e.amount=a):n!==r&&(e.basis=r,e.amount=o)},ne=(0,d.Pi)((function(e){var t=e.setDurationError,a=e.basis_option,r=e.toggleModal,n=e.has_amount_error,o=e.payout_value,u=e.stake_value,c=e.selected_duration,s=e.setSelectedDuration,d=(0,m.b)(),p=d.duration_min_max,f=d.duration,b=d.duration_unit,g=d.basis,y=d.amount,h=d.onChangeMultiple;i().useEffect((function(){t(!1)}),[]);var E=ee((0,v.getDurationMinMaxValues)(p,"tick","t"),2),x=E[0],w=E[1],k=f<x&&c<x?x:c;return i().createElement("div",{className:"trade-params__duration-tickpicker"},i().createElement(l.TickPicker,{default_value:k,submit_label:ae,max_value:w,min_value:x,onSubmit:function(e){var t=e.target.value,i={};n||re(i,u,o,a,g,y),f===t&&"t"===b||(i.duration_unit="t",i.duration=t),(0,v.isEmptyObject)(i)||h(i),r()},onValueChange:function(e){return s("t",e)},singular_label:(0,_.localize)("Tick"),plural_label:(0,_.localize)("Ticks")}))})),oe=(0,d.Pi)((function(e){var t=e.setDurationError,a=e.basis_option,r=e.toggleModal,n=e.duration_unit_option,o=e.has_amount_error,u=e.contract_expiry,c=void 0===u?"intraday":u,s=e.payout_value,p=e.stake_value,f=e.selected_duration,b=e.setSelectedDuration,g=(0,d.oR)().ui.addToast,y=(0,m.b)(),h=y.duration_min_max,E=y.duration,x=y.duration_unit,w=y.basis,k=y.amount,S=y.onChangeMultiple,j=n.value,M=ee((0,v.getDurationMinMaxValues)(h,c,j),2),O=M[0],C=M[1],A=function(e){var a=i().createElement(_.Localize,{i18n_default_text:"Should be between {{min}} and {{max}}",values:{min:O,max:(0,v.addComma)(C,0,!1)}});return parseInt(e)<O||parseInt(f)>C?(g({key:"duration_error",content:a,type:"error",timeout:2e3}),t(!0),"error"):parseInt(e)>C?(g({key:"duration_error",content:a,type:"error",timeout:2e3}),"error"):e.toString().length<1?(g({key:"duration_error",content:a,type:"error",timeout:2e3}),t(!0),!1):(t(!1),!0)};return i().createElement("div",{className:"trade-params__amount-keypad"},i().createElement(l.Numpad,{value:f,onSubmit:function(e){var t={};o||re(t,p,s,a,w,k),E===e&&x===j||(t.duration_unit=j,t.duration=e,t.expiry_type="duration"),(0,v.isEmptyObject)(t)||S(t),r()},render:function(e){var t=e.value,a=e.className;return i().createElement("div",{className:a},t)},pip_size:0,submit_label:ae,min:O,max:C,reset_press_interval:350,reset_value:"",onValidate:A,onValueChange:function(e){b(j,e),A(e)}}))}));const ie=(0,d.Pi)((function(e){var t=e.amount_tab_idx,a=e.toggleModal,r=e.duration_tab_idx,n=e.has_amount_error,o=e.setDurationTabIdx,u=e.setDurationError,c=e.t_duration,s=e.s_duration,d=e.m_duration,p=e.h_duration,f=e.d_duration,b=e.setSelectedDuration,g=e.stake_value,y=e.payout_value,h=(0,m.b)(),E=h.duration_units_list,x=h.duration_min_max,w=h.duration_unit,k=h.basis,S={t_duration:c,s_duration:s,m_duration:d,h_duration:p,d_duration:f},j=void 0!==r?r:E.findIndex((function(e){return e.value===w})),M=ee((0,v.getDurationMinMaxValues)(x,"daily","d"),2),O=M[0],C=M[1],A=function(e){b("d",e)},N=function(){return 0===t?"stake":1===t?"payout":k};return i().createElement("div",null,i().createElement(l.Tabs,{active_index:j,onTabItemClick:function(e){return function(e){o(e);var t=E[e].value;b(t,S["".concat(t,"_duration")])}(e)},single_tab_has_no_label:!0,top:!0},E.map((function(e){switch(e.value){case"t":return i().createElement("div",{label:e.text,key:e.value},i().createElement(ne,{basis_option:N(),has_amount_error:n,toggleModal:a,selected_duration:c,setDurationError:u,setSelectedDuration:b,stake_value:g,payout_value:y}));case"s":return i().createElement("div",{label:e.text,key:e.value},i().createElement(oe,{basis_option:N(),has_amount_error:n,toggleModal:a,duration_unit_option:e,selected_duration:s,setDurationError:u,setSelectedDuration:b,stake_value:g,payout_value:y}));case"m":return i().createElement("div",{label:e.text,key:e.value},i().createElement(oe,{basis_option:N(),has_amount_error:n,toggleModal:a,duration_unit_option:e,selected_duration:d,setDurationError:u,setSelectedDuration:b,stake_value:g,payout_value:y}));case"h":return i().createElement("div",{label:e.text,key:e.value},i().createElement(oe,{basis_option:N(),has_amount_error:n,toggleModal:a,duration_unit_option:e,selected_duration:p,setDurationError:u,setSelectedDuration:b,stake_value:g,payout_value:y}));case"d":return i().createElement("div",{label:e.text,key:e.value},i().createElement(oe,{basis_option:N(),has_amount_error:n,toggleModal:a,duration_unit_option:e,contract_expiry:"daily",selected_duration:f,setDurationError:u,setSelectedDuration:b,stake_value:g,payout_value:y}),i().createElement(l.RelativeDatepicker,{onChange:A,min_date:O,max_date:C,title:(0,_.localize)("Pick an end date")}));default:return null}}))))}));var le=a("./src/Modules/Trading/Components/Form/TradeParams/last-digit.jsx");function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){de(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function de(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==ue(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!==ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ue(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _e=Object.freeze({t:5,s:15,m:3,h:1,d:1}),pe=function(e,t){return me(me({},e),t)};const fe=(0,d.Pi)((function(e){var t,a,r=e.is_open,n=e.toggleModal,o=(0,d.oR)(),u=o.client,c=o.ui,s=u.currency,p=c.enableApp,f=c.disableApp,b=(0,m.b)(),v=b.amount,g=b.form_components,y=b.duration,h=b.duration_unit,E=b.duration_units_list,x=b.is_vanilla,w=i().useCallback((t=y,a=h,function(e){return a===e?t:_e[e]}),[]),k=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useReducer(pe,{trade_param_tab_idx:0,duration_tab_idx:void 0,amount_tab_idx:void 0,has_amount_error:!1,has_duration_error:!1,curr_duration_unit:h,curr_duration_value:y,t_duration:w("t"),s_duration:w("s"),m_duration:w("m"),h_duration:w("h"),d_duration:w("d"),stake_value:v,payout_value:v}),2),S=k[0],j=k[1];(0,l.usePreventIOSZoom)(),i().useEffect((function(){O(h,y),M(void 0)}),[y,h]);var M=function(e){return j({duration_tab_idx:e})},O=function(e,t){var a;j((de(a={},"".concat(e,"_duration"),t),de(a,"curr_duration_unit",e),de(a,"curr_duration_value",t),a))};return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:p,is_open:r,header:i().createElement("div",null),disableApp:f,toggleModal:n,height:"auto",width:"calc(100vw - 32px)",renderTitle:function(){return x&&1===S.trade_param_tab_idx?i().createElement("div",{className:"trade-params__vanilla-ic-info-wrapper"},i().createElement(l.Popover,{alignment:"bottom",icon:"info",id:"dt_vanilla-stake__tooltip",zIndex:9999,is_bubble_hover_enabled:!0,arrow_styles:{top:"-9px"},message:i().createElement(_.Localize,{i18n_default_text:"Your stake is a non-refundable one-time premium to purchase this contract. Your total profit/loss equals the contract value minus your stake."}),classNameWrapper:"trade-params--modal-wrapper",classNameBubble:"trade-params--modal-wrapper__content--vanilla"})):null}},i().createElement(l.ThemedScrollbars,null,i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"120px"},i().createElement(be,{currency:s,toggleModal:n,isVisible:function(e){return g.includes(e)},setTradeParamTabIdx:function(e){return j({trade_param_tab_idx:e})},trade_param_tab_idx:S.trade_param_tab_idx,setDurationTabIdx:M,duration_tab_idx:S.duration_tab_idx,setAmountTabIdx:function(e){return j({amount_tab_idx:e})},amount_tab_idx:S.amount_tab_idx,setSelectedAmount:function(e,t){return j(de({},"".concat(e,"_value"),t))},stake_value:S.stake_value,payout_value:S.payout_value,duration_unit:S.curr_duration_unit,duration_value:S.curr_duration_value,duration_units_list:E,has_amount_error:S.has_amount_error,setAmountError:function(e){j({has_amount_error:e})},setSelectedDuration:O,has_duration_error:S.has_duration_error,setDurationError:function(e){j({has_duration_error:e})},t_duration:S.t_duration,s_duration:S.s_duration,m_duration:S.m_duration,h_duration:S.h_duration,d_duration:S.d_duration})))))}));var be=(0,d.Pi)((function(e){var t=e.currency,a=e.toggleModal,r=e.isVisible,n=e.setAmountTabIdx,o=e.amount_tab_idx,u=e.setTradeParamTabIdx,c=e.trade_param_tab_idx,d=e.setDurationTabIdx,p=e.duration_unit,f=e.duration_units_list,b=e.duration_value,v=e.duration_tab_idx,g=e.has_amount_error,y=e.has_duration_error,h=e.setAmountError,E=e.setSelectedAmount,x=e.stake_value,w=e.payout_value,k=e.setDurationError,S=e.setSelectedDuration,j=e.t_duration,O=e.s_duration,C=e.m_duration,A=e.h_duration,N=e.d_duration,P=(0,m.b)(),T=P.basis_list,z=P.basis,D=P.is_vanilla,I=function(e){switch(e){case"duration":return i().createElement("div",{className:"trade-params__header"},i().createElement("div",{className:"trade-params__header-label"},(0,_.localize)("Duration")),i().createElement("div",{className:s()("trade-params__header-value",{"trade-params__header-value--has-error":y})},y?(0,_.localize)("Error"):(r=f.find((function(e){return e.value===p})),"".concat(b," ").concat(r&&(b>1?(0,_.localize)(r.text):(0,_.localize)(r.text.slice(0,-1)))))));case"amount":return i().createElement("div",{className:"trade-params__header"},i().createElement("div",{className:"trade-params__header-label"},D?(0,_.localize)("Stake"):(0,_.localize)("Amount")),i().createElement("div",{className:s()("trade-params__header-value",{"trade-params__header-value--has-error":g})},g?(0,_.localize)("Error"):(a=void 0!==o?o:T.findIndex((function(e){return e.value===z})),i().createElement(l.Money,{currency:t,show_currency:!0,amount:1===a?w:x}))));default:return null}var a,r};return i().createElement(l.Tabs,{active_index:c,className:"trade-params-duration-amount",onTabItemClick:u,top:!0},r("duration")&&i().createElement("div",{"data-header-content":I("duration")},i().createElement(ie,{toggleModal:a,amount_tab_idx:o,duration_tab_idx:v,setDurationTabIdx:d,setSelectedDuration:S,setDurationError:k,has_amount_error:g,t_duration:j,s_duration:O,m_duration:C,h_duration:A,d_duration:N,stake_value:x,payout_value:w})),r("amount")&&i().createElement("div",{"data-header-content":I("amount")},i().createElement(M,{duration_unit:p,duration_value:b,toggleModal:a,amount_tab_idx:o,setAmountTabIdx:n,has_duration_error:y,setSelectedAmount:E,setAmountError:h,stake_value:x,payout_value:w})))})),ve=(0,d.Pi)((function(){return(0,m.b)().form_components.includes("last_digit")&&i().createElement(le.Z,null)})),ge=(0,d.Pi)((function(){return(0,m.b)().form_components.includes("barrier")&&i().createElement(J.Z,null)})),ye=a("./src/Modules/Trading/Containers/contract-type.jsx");function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var xe=(0,d.Pi)((function(e){var t=e.toggleDigitsWidget,a=e.is_collapsed,r=(0,d.oR)().ui.onChangeUiStore,n=(0,m.b)(),o=n.amount,u=n.basis,c=n.currency,s=n.duration,p=n.duration_min_max,f=n.duration_unit,b=n.form_components,g=n.is_multiplier,y=n.last_digit,h=n.onChange,E=he(i().useState(!1),2),x=E[0],w=E[1];i().useEffect((function(){k()}));var k=function(){var e=(0,v.getExpiryType)(n),t=he((0,v.getDurationMinMaxValues)(p,e,f),2),a=t[0],o=t[1];"tick"===e&&s<a&&(r({name:"duration_".concat(f),value:a}),h({target:{name:"duration",value:a}})),!(s<a)&&s>o&&(r({name:"duration_".concat(f),value:o}),h({target:{name:"duration",value:o}}))},S=function(){return w(!x)},j=(0,v.getLocalizedBasis)();return i().createElement("div",{className:"mobile-widget__wrapper"},g?i().createElement(W,null):i().createElement("div",{id:"duration_amount_selector",className:"mobile-widget",onClick:S},i().createElement("div",{className:"mobile-widget__duration"},function(){if(!f)return"";var e={t:[(0,_.localize)("tick"),(0,_.localize)("ticks")],s:[(0,_.localize)("second"),(0,_.localize)("seconds")],m:[(0,_.localize)("min"),(0,_.localize)("mins")],h:[(0,_.localize)("hour"),(0,_.localize)("hours")],d:[(0,_.localize)("day"),(0,_.localize)("days")]};try{if(!f)return"";var t=1==+s?e[f][0]:e[f][1];return"".concat(s," ").concat(t)}catch(e){return""}}()),i().createElement("div",{className:"mobile-widget__amount"},i().createElement(l.Money,{amount:o,currency:c,show_currency:!0})),i().createElement("div",{className:"mobile-widget__type"},function(){switch(u){case"stake":return j.stake;case"payout":return j.payout;default:return u}}())),i().createElement(fe,{is_open:x,toggleModal:S}),("last_digit",b.includes("last_digit")&&a&&i().createElement("div",{className:"mobile-widget",onClick:t},i().createElement("div",{className:"mobile-widget__amount"},i().createElement(_.Localize,{i18n_default_text:"Digit: {{last_digit}} ",values:{last_digit:y}})))))}));const we=xe;var ke=a("./src/Modules/Trading/Containers/purchase.jsx"),Se=a("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.jsx"),je=a("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx"),Me=a("./src/Stores/Modules/Trading/Helpers/multiplier.js"),Oe=a("./src/App/Components/Form/fieldset.jsx");function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var Ae=(0,d.Pi)((function(e){var t=e.is_visible,a=e.onConfirm,r=e.onCancel,n=(0,d.oR)().ui,o=n.disableApp,u=n.enableApp,c=n.should_show_cancellation_warning,s=n.toggleCancellationWarning;return i().createElement(l.Dialog,{className:"trade-params__multiplier-deal-cancellation-dialog",title:(0,_.localize)("About deal cancellation"),confirm_button_text:(0,_.localize)("Got it"),cancel_button_text:(0,_.localize)("Cancel"),onConfirm:a,onCancel:r,is_mobile_full_width:!1,is_visible:t,disableApp:o,enableApp:u,portal_element_id:"modal_root"},i().createElement(l.Text,{size:"xxxs",color:"general"},i().createElement(_.Localize,{i18n_default_text:"Take profit and/or stop loss are not available while deal cancellation is active."})),i().createElement(l.Checkbox,{defaultChecked:!c,onChange:function(){return s()},name:"should_show_cancellation_warning",label:(0,_.localize)("Don't show this again")}))}));const Ne=(0,d.Pi)((function(e){var t=e.has_cancellation,a=e.has_take_profit,r=e.has_stop_loss,n=e.onChangeMultiple,o=e.cancellation_duration,u=(0,d.oR)().ui.should_show_cancellation_warning,c=(0,m.b)().cancellation_range_list,s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(!1),2),p=s[0],f=s[1];return i().createElement(i().Fragment,null,i().createElement(Ae,{is_visible:p,onCancel:function(){return f(!1)},onConfirm:function(){f(!1),(0,Me.L)({has_cancellation:t,onChangeMultiple:n})}}),i().createElement(Oe.Z,{className:"trade-container__fieldset"},i().createElement("div",{className:"dc-input-wrapper--inline"},i().createElement(l.Checkbox,{id:"dt_cancellation-checkbox_input",onChange:function(){var e;(e=(a||r)&&u)&&f(e),e||(0,Me.L)({has_cancellation:t,onChangeMultiple:n})},name:"has_cancellation",label:(0,_.localize)("Deal cancellation"),defaultChecked:t}),i().createElement(l.Popover,{alignment:"left",icon:"info",id:"dt_multiplier-stake__tooltip",is_bubble_hover_enabled:!0,classNameBubble:"trade-container__deal-cancellation-popover",zIndex:9999,message:(0,_.localize)("Cancel your trade anytime within a chosen time-frame. Triggered automatically if your trade reaches the stop out level within the chosen time-frame.")})),t&&i().createElement(i().Fragment,null,i().createElement(l.RadioGroup,{className:"trade-params__multiplier-radio-group",name:"trade-params__multiplier-radio",selected:o,onToggle:function(e){return(0,Me.Q)({event:e,onChangeMultiple:n})}},c.map((function(e){var t=e.text,a=e.value;return i().createElement(l.RadioGroup.Item,{key:a,id:t,label:t,value:a.toString()})}))))))}));function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){De(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function De(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==Pe(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!==Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Pe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const qe=(0,d.Pi)((function(e){var t,a,r=e.is_open,n=e.onClose,o=e.toggleDialog,u=(0,m.b)(),c=u.take_profit,d=u.has_take_profit,p=u.has_stop_loss,f=u.stop_loss,b=u.has_cancellation,g=u.cancellation_range_list,y=u.cancellation_duration,h=u.onChangeMultiple,E={take_profit:c,stop_loss:f,has_take_profit:d,has_stop_loss:p,has_cancellation:b,cancellation_duration:y},x=Ie(i().useState(E),2),w=x[0],k=x[1],S=Ie(i().useState({}),2),j=S[0],M=S[1],O=(null==g?void 0:g.length)>0,C=function(e){var t=["has_take_profit","has_stop_loss","has_cancellation",e.has_take_profit&&"take_profit",e.has_stop_loss&&"stop_loss",e.has_cancellation&&"cancellation_duration"];return(0,v.pick)(e,t)},A=function(e){M({take_profit:e.has_take_profit&&!e.take_profit?[(0,_.localize)("Please enter a take profit amount.")]:[],stop_loss:e.has_stop_loss&&!e.stop_loss?[(0,_.localize)("Please enter a stop loss amount.")]:[]})},N=function(e){var t=e.target,a=t.name,r=t.value,n=ze({},w);n[a]=r,k(n),A(n)},P=function(e){var t=ze({},w);Object.assign(t,e),k(t),A(t)};return i().createElement(i().Fragment,null,i().createElement(l.MobileDialog,{portal_element_id:"modal_root",visible:r,has_content_scroll:!0,onClose:function(){k(E),n.apply(void 0,arguments)}},i().createElement(l.Div100vhContainer,{className:s()("trade-params__multiplier-risk-management-dialog",{"trade-params__multiplier-risk-management-dialog--no-cancel":!O}),height_offset:"54px"},i().createElement(je.Z,{take_profit:w.take_profit,has_take_profit:w.has_take_profit,onChange:N,onChangeMultiple:P,validation_errors:j}),i().createElement(Se.Z,{stop_loss:w.stop_loss,has_stop_loss:w.has_stop_loss,onChange:N,onChangeMultiple:P,validation_errors:j}),O&&i().createElement(Ne,{has_take_profit:w.has_take_profit,has_stop_loss:w.has_stop_loss,has_cancellation:w.has_cancellation,cancellation_duration:w.cancellation_duration,onChangeMultiple:P}),i().createElement("div",{className:"trade-params__multiplier-risk-management-dialog-bottom-separator"}),i().createElement("div",{className:"trade-params__multiplier-risk-management-dialog-apply-button"},i().createElement(l.Button,{text:(0,_.localize)("Apply"),onClick:function(){h(w),o()},primary:!0,is_disabled:(null===(t=j.take_profit)||void 0===t?void 0:t.length)>0||(null===(a=j.stop_loss)||void 0===a?void 0:a.length)>0||(0,v.isDeepEqual)(C(w),C(E))})))))}));function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const Ze=(0,d.Pi)((function(){var e,t=(0,m.b)(),a=t.currency,r=t.stop_loss,n=t.take_profit,o=t.has_take_profit,u=t.has_stop_loss,c=t.cancellation_duration,s=t.cancellation_range_list,d=t.has_cancellation,p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,l=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(!1),2),f=p[0],b=p[1],v=o||u||d,g=null===(e=s.find((function(e){return e.value===c})))||void 0===e?void 0:e.text;return i().createElement(i().Fragment,null,i().createElement(qe,{is_open:f,toggleDialog:function(){b(!f)},onClose:function(){return b(!1)}}),i().createElement("div",{className:"mobile-widget mobile-widget__multiplier-risk-management",onClick:function(){return b(!f)}},!v&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Risk management")),i().createElement("div",{className:"mobile-widget__item-value"},(0,_.localize)("Not set"))),o&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Take profit")),i().createElement("div",{className:"mobile-widget__item-value"},i().createElement(l.Money,{amount:n,currency:a,show_currency:!0}))),u&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Stop loss")),i().createElement("div",{className:"mobile-widget__item-value"},i().createElement(l.Money,{amount:r,currency:a,show_currency:!0}))),d&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Deal Cancellation")),i().createElement("div",{className:"mobile-widget__item-value"},g))))}));var Le=a("./src/Modules/Contract/Components/AccumulatorsStats/index.js"),Ue=a("./src/Modules/Trading/Components/Form/TradeParams/strike.jsx"),Ge=a("./src/Modules/Trading/Components/Form/TradeParams/vanilla-trade-types.jsx");function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ve.apply(this,arguments)}var We=function(e){var t=e.form_components,a=e.has_allow_equals,r=e.has_take_profit,n=e.previous_symbol,o=e.is_allow_equal,u=e.is_accumulator,c=e.is_trade_params_expanded,m=e.is_multiplier,d=e.is_vanilla,_=e.onChange,p=e.take_profit,b=e.setIsTradeParamsExpanded;i().useEffect((function(){n&&o&&a&&b(!0)}),[n]);var v=!c,g=function(e){return t.includes(e)};return i().createElement(l.Collapsible,{position:"top",is_collapsed:v,onClick:function(e){b(e)}},u&&v&&i().createElement(Le.Z,null),i().createElement("div",{className:"trade-params__contract-type-container"},i().createElement(ye.Z,null),m&&i().createElement(B,null),u&&i().createElement(H,null),d&&i().createElement(Ge.Z,null)),g("last_digit")&&i().createElement("div",{"data-collapsible":"true"},i().createElement(ve,null)),g("barrier")&&i().createElement("div",{"data-collapsible":"true"},i().createElement(ge,null)),g("strike")&&i().createElement("div",{"data-collapsible":"true"},i().createElement(Ue.Z,null)),!u&&i().createElement(we,{is_collapsed:v,toggleDigitsWidget:function(){b(!0)}}),a&&i().createElement("div",{"data-collapsible":"true"},i().createElement(f,null)),m&&i().createElement("div",{"data-collapsible":"true"},i().createElement(Ze,null)),u&&[i().createElement(Q,{key:"accu_amount"}),i().createElement("div",{"data-collapsible":"true",key:"accu_take_profit",className:s()("take-profit","mobile-widget")},i().createElement(je.Z,{take_profit:p,has_take_profit:r,onChange:_,has_info:!1})),i().createElement("div",{"data-collapsible":"true",key:"accu_info"},i().createElement(X.Z,null))],d?i().createElement(ke.Z,null):i().createElement("div",{className:"purchase-container".concat(u?"--accumulator":"")},i().createElement(ke.Z,null)))},$e=(0,d.Pi)((function(e){var t=e.is_trade_enabled,a=(0,m.b)(),r=a.is_accumulator,n=a.is_multiplier,o=a.is_vanilla,l=a.duration_unit,c=a.contract_types_list,s=a.contract_type,d=a.expiry_type,_=a.contract_start_type,p={is_accumulator:r,is_multiplier:n,is_vanilla:o,form_components:a.form_components,has_take_profit:a.has_take_profit,onChange:a.onChange,previous_symbol:a.previous_symbol,is_trade_params_expanded:a.is_trade_params_expanded,setIsTradeParamsExpanded:a.setIsTradeParamsExpanded,take_profit:a.take_profit,is_allow_equal:!!a.is_equal},f=(0,b.OW)(c,l,_),v=(0,b.vy)(c),g=(0,b.i$)(s)&&(f||"endtime"===d)&&v;return t?i().createElement(We,Ve({has_allow_equals:g},p)):i().createElement("div",{className:"mobile-wrapper__content-loader"},i().createElement(u.G,{speed:2}))}));$e.propTypes={is_trade_enabled:n().bool};const Be=$e}}]);